<style>
	.dvd-wrapper {
		width: 100%;
		height: 100%;
		max-height: 100%;
		overflow: hidden;
		background: black;
		position: relative;
	}

	.dvd-logo {
		position: absolute;
		left: 0;
		top: 0;
		width: 20%;
		object-fit: contain;
	}

	.dvd-overlay {
		position: absolute;
		left: 0;
		top: 0;
		opacity: 0.2;
		mask-image: url('../applicationrenders/img/dvdlogo.png');
		mask-size: 100%;
		mask-repeat: no-repeat;
		mask-position: center;
		background: red;
	}
</style>

<script defer>

	document.querySelectorAll('.dvd-wrapper').forEach((dvdwrapper) => {
		const dvdlogo = dvdwrapper.querySelector('.dvd-logo');
		const overlay = dvdwrapper.querySelector('.dvd-overlay');
		let directionX = 1;
		let directionY = 1;

		const randomHue = () => Math.floor(Math.random() * 360);

		// Initialize position if not set
		if (!dvdlogo.style.left) {
			dvdlogo.style.left = '0px';
		}
		if (!dvdlogo.style.top) {
			dvdlogo.style.top = '0px';
		}

		// Ensure position is initialized as integers
		let posX = parseInt(dvdlogo.style.left, 10) || 0;
		let posY = parseInt(dvdlogo.style.top, 10) || 0;

		const updatePosition = () => {
			const wrapperWidth = dvdwrapper.clientWidth;
			const wrapperHeight = dvdwrapper.clientHeight;
			const logoWidth = dvdlogo.offsetWidth;
			const logoHeight = dvdlogo.offsetHeight;

			posX += directionX;
			posY += directionY;

			// Check for collision with walls
			if (posX + logoWidth >= wrapperWidth || posX <= 0) {
				directionX *= -1;
				overlay.style.backgroundColor = `hsl(${randomHue()}, 100%, 50%)`;
				posX = Math.max(0, Math.min(posX, wrapperWidth - logoWidth)); // Clamp position
			}
			if (posY + logoHeight >= wrapperHeight || posY <= 0) {
				directionY *= -1;
				overlay.style.backgroundColor = `hsl(${randomHue()}, 100%, 50%)`;
				posY = Math.max(0, Math.min(posY, wrapperHeight - logoHeight)); // Clamp position
			}

			dvdlogo.style.left = `${posX}px`;
			dvdlogo.style.top = `${posY}px`;

			overlay.style.width = `${logoWidth}px`;
			overlay.style.height = `${logoHeight}px`;
			overlay.style.left = `${posX}px`;
			overlay.style.top = `${posY}px`;

			requestAnimationFrame(updatePosition); // Use requestAnimationFrame for smooth animation
		};

		requestAnimationFrame(updatePosition);
	});
</script>

<div class="dvd-wrapper">
	<img class="dvd-logo" src="../applicationrenders/img/dvdlogo.png" alt="DVD logo" />
	<div class="dvd-overlay"></div>
</div>
